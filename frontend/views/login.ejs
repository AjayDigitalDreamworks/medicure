<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MediCure - Hospital Management System</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Custom CSS -->
  <link href="/css/login-style.css" rel="stylesheet" />
</head>
<body>
<div class="login-container">
  <div class="container-fluid vh-100">
    <div class="row h-100">
      <div class="col-12">
        <div class="login-wrapper d-flex flex-column justify-content-center align-items-center h-100">
          
          <!-- Header -->
          <div class="text-center mb-5">
            <h4 class="text-primary fw-bold mb-1">MediCure</h4>
          </div>

          <!-- Login Form -->
          <div class="login-form-container">
            <div class="text-center mb-4">
              <h2 class="h3 mb-2">Welcome to MediCure</h2>
              <p class="text-muted">Your health journey, simplified.</p>

              <% if (msg) { %>
              <div style="padding: 10px; margin-bottom: 10px;
                <%= msg.includes('Error') ? 'color: red; border: 1px solid red;' :
                msg.includes('Success') ? 'color: green; border: 1px solid green;' :
                'color: blue; border: 1px solid blue;' %>">
                <%= msg %>
              </div>
              <% } %>
            </div>

            <!-- Tabs -->
            <div class="login-tabs mb-4">
              <button class="tab-btn active" data-tab="signin">Sign In</button>
              <button class="tab-btn" data-tab="signup">Sign Up</button>
            </div>

            <!-- Sign In Form -->
            <form method="POST" action="/api/auth/login" id="signin-form" class="tab-content active">
              <input type="hidden" name="user_type" value="patient" />

              <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="your.email@example.com" required />
              </div>

              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="••••••••" required />
              </div>

              <div class="text-center mb-3">
                <a href="/api/auth/forgot" class="text-primary text-decoration-none">Forgot Password?</a>
              </div>

              <button type="submit" class="btn btn-primary w-100 mb-3">Sign In</button>
            </form>

            <!-- Sign Up Form -->
            <form method="POST" action="/api/auth/register" id="signup-form" class="tab-content">
              <input type="hidden" name="user_type" value="patient" />

              <div class="mb-3">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="name" name="name" required />
              </div>

              <div class="mb-3">
                <label for="signup_email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="signup_email" name="email" placeholder="your.email@example.com" required />
              </div>

              <div class="mb-3">
                <label for="signup_password" class="form-label">Password</label>
                <input type="password" class="form-control" id="signup_password" name="password" placeholder="••••••••" required />
              </div>

              <div class="mb-3">
                <label for="role" class="form-label">Role:</label>
                <select class="form-control" name="role" id="role-select">
                  <option value="patient">Patient</option>
                  <option value="doctor">Doctor</option>
                  <option value="admin">Admin</option>
                </select>
              </div>

              <!-- Doctor-Specific Fields -->
              <div id="doctor-fields" style="display: none;">
                <div class="mb-3">
  <label for="department" class="form-label">Department</label>
  <select class="form-control" id="department" name="department" required>
    <option value="">-- Select Department --</option>
    <option value="Cardiology">Cardiology</option>
    <option value="Neurology">Neurology</option>
    <option value="Orthopedics">Orthopedics</option>
    <option value="Gynecology">Gynecology</option>
    <option value="Dermatology">Dermatology</option>
    <option value="ENT">ENT (Ear, Nose, Throat)</option>
    <option value="Pediatrics">Pediatrics</option>
    <option value="General Medicine">General Medicine</option>
    <option value="Psychiatry">Psychiatry</option>
    <option value="Radiology">Radiology</option>
    <option value="Urology">Urology</option>
  </select>
</div>

                <div class="mb-3">
                  <label for="qualification" class="form-label">Qualification</label>
                  <input type="text" class="form-control" id="qualification" name="qualification" />
                </div>
                <div class="mb-3">
                  <label for="specialization" class="form-label">Specialization</label>
                  <input type="text" class="form-control" id="specialization" name="specialization" />
                </div>
                <div class="mb-3">
                  <label for="experience" class="form-label">Experience (in years)</label>
                  <input type="number" class="form-control" id="experience" name="experience" min="0" />
                </div>
                <div class="mb-3">
                  <label for="bio" class="form-label">Short Bio</label>
                  <textarea class="form-control" id="bio" name="bio" rows="2"></textarea>
                </div>
                <div class="mb-3">
                  <label for="availableDays" class="form-label">Available Days</label>
                  <input type="text" class="form-control" id="availableDays" name="availableDays" placeholder="e.g. Mon, Wed, Fri" />
                </div>
                <div class="mb-3">
                  <label for="availableTimeSlots" class="form-label">Available Time Slots</label>
                  <input type="text" class="form-control" id="availableTimeSlots" name="availableTimeSlots" placeholder="e.g. 10:00-12:00" />
                </div>
              </div>

              <button type="submit" class="btn btn-primary w-100 mb-3">Sign Up</button>
            </form>

            <div class="text-center">
              <small class="text-muted">
                By signing in or creating an account, you agree to MediCure's
                <a href="#" class="text-primary">Terms of Service</a> and
                <a href="#" class="text-primary">Privacy Policy</a>.
              </small>
            </div>
          </div>

          <!-- Footer Links -->
          <div class="login-footer mt-5">
            <div class="d-flex justify-content-between">
              <div class="footer-links">
                <a href="#" class="text-muted me-3">Product</a>
                <a href="#" class="text-muted me-3">Resources</a>
                <a href="#" class="text-muted">Company</a>
              </div>
              <div class="social-links">
                <a href="#" class="text-muted me-2"><i class="bi bi-facebook"></i></a>
                <a href="#" class="text-muted me-2"><i class="bi bi-twitter"></i></a>
                <a href="#" class="text-muted me-2"><i class="bi bi-linkedin"></i></a>
                <a href="#" class="text-muted"><i class="bi bi-youtube"></i></a>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript -->
<script>
  // Tab switching
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      const tab = this.dataset.tab;
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      document.querySelectorAll('.tab-content').forEach(form => form.classList.remove('active'));
      document.getElementById(tab + '-form').classList.add('active');
    });
  });

  // Doctor fields show/hide
  const roleSelect = document.getElementById('role-select');
  const doctorFields = document.getElementById('doctor-fields');

//   function toggleDoctorFields() {
//     if (roleSelect.value === 'doctor') {
//       doctorFields.style.display = 'block';
//     } else {
//       doctorFields.style.display = 'none';
//     }
//   }

//   roleSelect.addEventListener('change', toggleDoctorFields);
//   window.addEventListener('DOMContentLoaded', toggleDoctorFields); // check on page load
</script>

<script>
  function toggleDoctorFields() {
    const role = document.querySelector('[name="role"]').value;
    const doctorFields = document.getElementById('doctor-fields');
    const doctorInputs = doctorFields.querySelectorAll('input, select, textarea');

    if (role === 'doctor') {
      doctorFields.style.display = 'block';
      doctorInputs.forEach(input => {
        input.disabled = false;
        input.required = true;
      });
    } else {
      doctorFields.style.display = 'none';
      doctorInputs.forEach(input => {
        input.disabled = true;
        input.required = false;
      });
    }
  }

  document.querySelector('[name="role"]').addEventListener('change', toggleDoctorFields);

  // Run on page load
  window.addEventListener('DOMContentLoaded', toggleDoctorFields);
</script>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Custom JS -->
<script src="/js/main.js"></script>

</body>
</html>
